# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é UX —É–ª—É—á—à–µ–Ω–∏–π

## –ß—Ç–æ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

‚úÖ –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å —Å—Ç–∞—Ç—É—Å–∞ (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3)  
‚úÖ –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏–∏ (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 4)

---

## –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä

```bash
cd /home/mguzieiev/maks/bot-generic
python3 -m uvicorn app.main:app --reload
```

### 2. –û—Ç–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –∞–ø–≥—Ä–µ–π–¥–∞

```
http://localhost:8000/billing/upgrade
```

### 3. –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

#### API —ç–Ω–¥–ø–æ–∏–Ω—Ç `/billing/account`

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–æ–≤—ã–µ –ø–æ–ª—è –≤ –æ—Ç–≤–µ—Ç–µ:**
```bash
curl -H "Authorization: Bearer YOUR_TOKEN" http://localhost:8000/billing/account | jq
```

**–î–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–æ–ª—è:**
- `plan_type_display` - "–ü–æ–¥–ø–∏—Å–∫–∞" –∏–ª–∏ "–ü–∞–∫–µ—Ç –∑–∞–ø—Ä–æ—Å–æ–≤"
- `status_display` - –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Å—Ç–∞—Ç—É—Å
- `free_requests_remaining` - –≤—ã—á–∏—Å–ª—è–µ–º–æ–µ –ø–æ–ª–µ
- `credits_purchased`, `credits_used`, `credits_remaining` - –¥–ª—è ONE_TIME
- `can_use_service`, `should_upgrade`, `upgrade_reason` - —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

#### UI –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ /billing/upgrade

**–î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å ONE_TIME –ø–ª–∞–Ω–æ–º –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤–∏–¥–Ω–æ:**
- ‚úÖ "–í–∞—à —Ç–∞—Ä–∏—Ñ–Ω—ã–π –ø–ª–∞–Ω"
- ‚úÖ –¢–∏–ø –ø–ª–∞–Ω–∞: "(–ü–∞–∫–µ—Ç –∑–∞–ø—Ä–æ—Å–æ–≤)"
- ‚úÖ –°—Ç–∞—Ç—É—Å —Å —Ü–≤–µ—Ç–æ–≤—ã–º –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- ‚úÖ –°–µ–∫—Ü–∏—è "üí≥ –ë–∞–ª–∞–Ω—Å –∫—Ä–µ–¥–∏—Ç–æ–≤" —Å –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–æ–º
- ‚úÖ –ü–æ—è—Å–Ω–µ–Ω–∏–µ: "–ö—Ä–µ–¥–∏—Ç—ã –Ω–µ —Å–≥–æ—Ä–∞—é—Ç..."
- ‚úÖ –ê–ª–µ—Ä—Ç –µ—Å–ª–∏ –∫—Ä–µ–¥–∏—Ç—ã –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—Ç—Å—è

**–î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å SUBSCRIPTION –ø–ª–∞–Ω–æ–º –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤–∏–¥–Ω–æ:**
- ‚úÖ "–í–∞—à —Ç–∞—Ä–∏—Ñ–Ω—ã–π –ø–ª–∞–Ω"
- ‚úÖ –¢–∏–ø –ø–ª–∞–Ω–∞: "(–ü–æ–¥–ø–∏—Å–∫–∞)"
- ‚úÖ üéÅ –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã (–µ—Å–ª–∏ –µ—Å—Ç—å)
- ‚úÖ üìä –ó–∞–ø—Ä–æ—Å—ã –∑–∞ –ø–µ—Ä–∏–æ–¥ —Å –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–æ–º
- ‚úÖ "–ü–µ—Ä–∏–æ–¥ –Ω–∞—á–∞–ª—Å—è: [–¥–∞—Ç–∞]"
- ‚úÖ –ê–ª–µ—Ä—Ç –µ—Å–ª–∏ –∑–∞–ø—Ä–æ—Å—ã –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—Ç—Å—è

**–ö–∞—Ä—Ç–æ—á–∫–∏ –ø–ª–∞–Ω–æ–≤ –≤ —Å–ø–∏—Å–∫–µ:**
- ‚úÖ –ë–µ–π–¥–∂–∏: "–ü–æ–¥–ø–∏—Å–∫–∞" (—Å–∏–Ω–∏–π) / "–ü–∞–∫–µ—Ç –∑–∞–ø—Ä–æ—Å–æ–≤" (–æ—Ä–∞–Ω–∂–µ–≤—ã–π)
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è" –¥–ª—è SUBSCRIPTION
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "–ö—É–ø–∏—Ç—å –ø–∞–∫–µ—Ç" –¥–ª—è ONE_TIME
- ‚úÖ –î–ª—è ONE_TIME: "X –∑–∞–ø—Ä–æ—Å–æ–≤", "–ö—Ä–µ–¥–∏—Ç—ã –Ω–µ —Å–≥–æ—Ä–∞—é—Ç"
- ‚úÖ –î–ª—è SUBSCRIPTION: "X –∑–∞–ø—Ä–æ—Å–æ–≤ –∑–∞ –º–µ—Å—è—Ü", –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –µ—Å–ª–∏ –µ—Å—Ç—å

---

## –°—Ü–µ–Ω–∞—Ä–∏–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º –ø–ª–∞–Ω–æ–º

**–û–∂–∏–¥–∞–µ—Ç—Å—è:**
- –¢–∏–ø –ø–ª–∞–Ω–∞: "–ü–∞–∫–µ—Ç –∑–∞–ø—Ä–æ—Å–æ–≤" (–µ—Å–ª–∏ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π ONE_TIME)
- –°—Ç–∞—Ç—É—Å: "–ü—Ä–æ–±–Ω—ã–π –ø–µ—Ä–∏–æ–¥" (—Å–∏–Ω–∏–π)
- –ë–∞–ª–∞–Ω—Å –∫—Ä–µ–¥–∏—Ç–æ–≤: 5 –∏–∑ 7 –æ—Å—Ç–∞–ª–æ—Å—å (–ø–æ —Ç–µ–∫—É—â–µ–º—É –ø–ª–∞–Ω—É –Ω–∞ –ø—Ä–æ–¥–µ)
- –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
- –ù–µ—Ç –∞–ª–µ—Ä—Ç–æ–≤ (–ø–æ–∫–∞ –µ—Å—Ç—å –∫—Ä–µ–¥–∏—Ç—ã)

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–∑—Ä–∞—Å—Ö–æ–¥–æ–≤–∞–ª –≤—Å–µ –∫—Ä–µ–¥–∏—Ç—ã

**–û–∂–∏–¥–∞–µ—Ç—Å—è:**
- –ë–∞–ª–∞–Ω—Å –∫—Ä–µ–¥–∏—Ç–æ–≤: 0 –∏–∑ 7
- –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –∑–∞–ø–æ–ª–Ω–µ–Ω –Ω–∞ 100%
- üö´ –ö—Ä–∞—Å–Ω—ã–π –∞–ª–µ—Ä—Ç: "–ö—Ä–µ–¥–∏—Ç—ã –∏—Å—á–µ—Ä–ø–∞–Ω—ã. –ö—É–ø–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞–∫–µ—Ç –∑–∞–ø—Ä–æ—Å–æ–≤."
- `can_use_service: false`

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å –∞–∫—Ç–∏–≤–Ω–æ–π SUBSCRIPTION

**–û–∂–∏–¥–∞–µ—Ç—Å—è:**
- –¢–∏–ø –ø–ª–∞–Ω–∞: "–ü–æ–¥–ø–∏—Å–∫–∞"
- –°—Ç–∞—Ç—É—Å: "–ê–∫—Ç–∏–≤–Ω–∞" (–∑–µ–ª–µ–Ω—ã–π)
- –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã (–µ—Å–ª–∏ –µ—Å—Ç—å –≤ –ø–ª–∞–Ω–µ)
- –ó–∞–ø—Ä–æ—Å—ã –∑–∞ –ø–µ—Ä–∏–æ–¥ —Å –æ—Å—Ç–∞—Ç–∫–æ–º
- "–°–ª–µ–¥—É—é—â–µ–µ —Å–ø–∏—Å–∞–Ω–∏–µ: [–¥–∞—Ç–∞]"
- –ö–Ω–æ–ø–∫–∞ "–ö—É–ø–∏—Ç—å –ø–∞–∫–µ—Ç" —É ONE_TIME –ø–ª–∞–Ω–æ–≤ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –ü–æ–¥–ø–∏—Å–∫–∞ –ø—Ä–∏–±–ª–∏–∂–∞–µ—Ç—Å—è –∫ –ª–∏–º–∏—Ç—É

**–û–∂–∏–¥–∞–µ—Ç—Å—è:**
- –ó–∞–ø—Ä–æ—Å—ã –∑–∞ –ø–µ—Ä–∏–æ–¥: 995 –∏–∑ 1000 –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ
- –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –ø–æ—á—Ç–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω
- ‚ö†Ô∏è –ñ–µ–ª—Ç—ã–π –∞–ª–µ—Ä—Ç: "–ó–∞–ø—Ä–æ—Å—ã –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—Ç—Å—è. –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º –æ–±–Ω–æ–≤–∏—Ç—å –ø–ª–∞–Ω."
- `should_upgrade: true`

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏–∏

‚úÖ –í–µ–∑–¥–µ "–∑–∞–ø—Ä–æ—Å—ã", –Ω–∏–≥–¥–µ –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å "credits" –∏–ª–∏ "uses"  
‚úÖ ONE_TIME = "–ü–∞–∫–µ—Ç –∑–∞–ø—Ä–æ—Å–æ–≤"  
‚úÖ SUBSCRIPTION = "–ü–æ–¥–ø–∏—Å–∫–∞"  
‚úÖ –ï–¥–∏–Ω—ã–µ —Ç–µ—Ä–º–∏–Ω—ã –≤ API –∏ UI  

---

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

‚ö†Ô∏è **–¢–µ–∫—É—â–∏–π –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π –ø–ª–∞–Ω –Ω–∞ –ø—Ä–æ–¥–µ - ONE_TIME**
- –≠—Ç–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ, –Ω–æ UI —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —ç—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç "–ü–∞–∫–µ—Ç –∑–∞–ø—Ä–æ—Å–æ–≤" –≤–º–µ—Å—Ç–æ "–ü–æ–¥–ø–∏—Å–∫–∞"
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø–ª–∞–Ω (—Å–º. UX_AUDIT —Ä–∞–∑–¥–µ–ª 11)

‚ö†Ô∏è **–ü–ª–∞–Ω –∑–∞ 20‚Ç¨ –¥–∞–µ—Ç 1 –∫—Ä–µ–¥–∏—Ç**
- UI –ø–æ–∫–∞–∂–µ—Ç "1 –∑–∞–ø—Ä–æ—Å" –∑–∞ $20
- –≠—Ç–æ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –∞–±—Å—É—Ä–¥–Ω–æ (–∫–∞–∫ –∏ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å)
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –ø–ª–∞–Ω

---

## Regression testing

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Å—Ç–∞—Ä—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –Ω–µ —Å–ª–æ–º–∞–ª—Å—è:

1. ‚úÖ –ü–æ–¥–ø–∏—Å–∫–∞ —á–µ—Ä–µ–∑ Paddle —Ä–∞–±–æ—Ç–∞–µ—Ç
2. ‚úÖ –û—Ç–º–µ–Ω–∞ –ø–æ–¥–ø–∏—Å–∫–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
3. ‚úÖ Webhook –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
4. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç (PolicyEngine)
5. ‚úÖ Dashboard –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç usage
6. ‚úÖ Admin –ø–∞–Ω–µ–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## –ü–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–ï—Å–ª–∏ –≤—Å–µ –û–ö:
1. –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
2. –ó–∞–¥–µ–ø–ª–æ–∏—Ç—å –Ω–∞ –ø—Ä–æ–¥
3. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π –ø–ª–∞–Ω (SQL –∏–∑ UX_AUDIT.md —Ä–∞–∑–¥–µ–ª 11)
4. –°–æ–∑–¥–∞—Ç—å –Ω–æ—Ä–º–∞–ª—å–Ω—ã–µ –ø–∞–∫–µ—Ç—ã –∫—Ä–µ–¥–∏—Ç–æ–≤

---

**–ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é!** üéâ
